---
title: ""
echo: false
message: false
warning: false
---

```{r}
#| column: screen
#| out-width: 100%
#| fig-height: 9
# remotes::install_github("trafficonese/leaflet.extras")
library(leaflet)
library(leaflet.extras)
library(htmlwidgets)
source(here::here("R/add_groups.R"))
m0 <-
  leaflet() |>
  setView(-19, 65, zoom = 5) |>
  hs_add_base() |> 
  hs_add_veidar() |> 
  addWMSTiles(baseUrl = "https://hafsja-geoserver.dev.hafogvatn.cloud/geoserver/wms",
                layers = "test:sample_species_lines_v",
                group = "Botndýr",
                options = WMSTileOptions(format = "image/png",
                                         transparent  = TRUE,
                                         opacity = 1)) |>
  hs_add_log()


m <-
  m0 |>
  addGroupedLayersControl(
    baseGroups = c("Hnöttur", "Botnlag"),
    overlayGroups = list(
      "Sókn" = c("Fish trawl", "Shrimp trawl", "Nephrops trawl", "Longline"),
      "Lífríki" = c("Botndýr"),
      "Lög" = c("12 mílur", "EEZ"),
      "Reglugerðir" = c("Nothing here yet")
    ),
    position = "topright",
    options = groupedLayersControlOptions(
      exclusiveGroups = NULL, #c("Sókn"),
      groupCheckboxes = TRUE,
      collapsed = FALSE,
      groupsCollapsable = TRUE,
      sortLayers = FALSE,
      sortGroups = FALSE,
      sortBaseLayers = FALSE)) |> 
  leaflet.extras::addFullscreenControl() |> 
  leaflet::hideGroup(group = c("Botndýr", "EEZ", "Nothing here yet"))
m
```

